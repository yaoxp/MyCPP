# static

## C++11中关于静态局部变量初始化的要求
1. 变量在代码第一次执行到变量声明的地方时初始化。
2. 初始化过程中发生异常的话视为未完成初始化，未完成初始化的话，需要下次有代码执行到相同位置时再次初始化。
3. 在当前线程执行到需要初始化变量的地方时，如果有其他线程正在初始化该变量，则阻塞当前线程，直到初始化完成。
4. 如果初始化过程中发生了对初始化的递归调用，则视为未定义行为。

## 为啥函数内用静态局部变量，不用全局变量？
- 用全局变量后，变量不仅仅只受此函数控制。扩大了变量的作用域。

## 为啥对象中需要用static变量
- 需要一个数据对象为整个类而非某个对象服务，同时又力求不破坏类的封装性，即要求此成员隐藏在类的内部，对外不可见时，可将其定义为静态数据。

## 静态全局变量和普通全局变量的区别
- 静态全局变量 作用域是声明变量所在的文件，不能被其它文件所用；其它文件中可以定义相同名字的变量，<mark>不会发生冲突</mark>。
- 普通全局变量 作用域是整个工程，在另一个文件中，通过extern全局变量名的声明，就可以使用全局变量。

## 用法

- 函数内的静态局部变量

普通函数内局部变量在函数结束后就被销毁

静态局部变量在函数结束后不被销毁

- 文件内的静态全局变量



- 类的静态变量

不需要实例化一个类就可以访问

在类实例之间共享

使用前必须初始化, <mark>不能在声明的同时初始化。如果加const修饰则可以在声明时初始化。</mark>

- 类的静态方法

不需要实例化一个类就可以访问

在类实例之前共享